<!DOCTYPE HTML>
<html>
<head>
</head>
<body>
<!--multiple is set to allow multiple files to be selected-->

<input id="myfiles" multiple type="file">

</body>

<script>

var pullfiles=function(){ 
    // love the query selector
    var fileInput = document.querySelector("#myfiles");
    var files = fileInput.files;
    // cache files.length 
    var fl=files.length;
    var i=0;

    var lines="";

    var nbread=0;
    while ( i < fl) {
        // localize file var in the loop
        var f = files[i];
        //alert(file.name);
        //lines+=f.name+";\n";

	    if (f) {
	    	lines +="Trying "+f.name+"\r\n";
	      var r = new FileReaderSync();	      
	      r.readAsText(f);

		  var contents = r.result;
	        lines+= "Got the file" 
	              +"name: " + f.name + " "
	              +"type: " + f.type + " "
	              +"size: " + f.size + " bytes "
	              + "starts with: \r\n" 
	              + contents + "\r\n";
	         lines+=" "+r.error+"\r\n";	      
	    } else { 
	      alert("Failed to load file");
	    }

        i++;
    }    

 	var a = document.createElement("a");
    var file = new Blob([lines], {type: 'text/plain'});
    a.href = URL.createObjectURL(file);
    a.download = "winamax_json.txt";
    a.click();


}

// set the input element onchange to call pullfiles
document.querySelector("#myfiles").onchange=pullfiles;

//a.t
</script>

</html>